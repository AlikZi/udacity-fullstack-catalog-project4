{% extends 'main.html' %} {% block content %}
<div class="col-md-9 mt-3">
  <div class="row">
    <div class="col-md-8 offset-md-2">
      <h2>Create New Product</h2>
      <form action="#" method="POST" class="mb-5">
        <div class="form-group">
          <label for="name">Name:</label>
          <input type="text" id="form_name" class="form-control mb-2" name="name" placeholder="Product Name">
          <div class="invalid-feedback">
            Name is required
          </div>
        </div>
        <div class="form-group">
          <label for="name">Image URL:</label>
          <input type="text" id="form_image" class="form-control mb-2" name="image_url" placeholder="http://somesource.com/someimage.jpg">
          <div class="invalid-feedback">
            Image URL is required
          </div>
        </div>
        <div class="form-group">
          <label for="name">Original URL:</label>
          <input type="text" id="form_url" class="form-control mb-2" name="product_url" placeholder="http://somesource.com/">
          <div class="invalid-feedback">
            Product URL is required
          </div>
        </div>
        <div class="form-group">
          <label for="category_name">Category:</label>
          <select class="form-control" name="category_name">
            {% for category in categories %}
            <option>{{ category.name }}</option>
            {% endfor %}
          </select>
        </div>
        <div class="form-group">
          <label for="description">Description</label>
          <textarea id="form_description" class="form-control" rows="3" name="description"></textarea>
          <div class="invalid-feedback">
            Description of product is required
          </div>
        </div>
        <button type="submit" class="btn btn-success btn-block mt-3" onclick="checkForm(event)" id="submit" type="submit">
          Create
        </button>
    </div>
    </form>
  </div>
</div>
</div>

<script>
  function checkForm(event) {
    var nameVal = $('#form_name').val().length;
    var imageVal = $('#form_image').val().length;
    var urlVal = $('#form_url').val().length;
    var descVal = $('#form_description').val().length;
    if (nameVal == 0 || imageVal == 0 || urlVal == 0 || descVal == 0) {
      event.preventDefault();
    }
    $('#form_name').addClass(nameVal > 0 ? 'is-valid' : 'is-invalid');
    $('#form_image').addClass(imageVal > 0 ? 'is-valid' : 'is-invalid');
    $('#form_url').addClass(urlVal > 0 ? 'is-valid' : 'is-invalid');
    $('#form_description').addClass(descVal > 0 ? 'is-valid' : 'is-invalid');

  }
</script>
{% endblock %}